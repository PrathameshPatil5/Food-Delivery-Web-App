<!DOCTYPE html>
<html>
<head>
    <title>Register</title>
    <script>
        function toggleRestaurantFields() {
            var role = document.getElementById("role").value;
            var restaurantFields = document.getElementById("restaurant-fields");
            if (role === "restaurant") {
                restaurantFields.style.display = "block";
            } else {
                restaurantFields.style.display = "none";
            }
        }
    </script>
</head>
<body>
    <h2>Register</h2>
    {% if error %}
        <p style="color:red;">{{ error }}</p>
    {% endif %}
    
    <form method="POST">
        {% csrf_token %}
        
        <label>Username:</label><br>
        <input type="text" name="username" required><br><br>

        <label>Password:</label><br>
        <input type="password" name="password" required><br><br>

        <label>Role:</label><br>
        <select name="role" id="role" required onchange="toggleRestaurantFields()">
            <option value="customer">Customer</option>
            <option value="restaurant">Restaurant</option>
        </select><br><br>

        <!-- Extra fields for restaurants -->
        <div id="restaurant-fields" style="display:none;">
            <label>Restaurant Name:</label><br>
            <input type="text" name="restaurant_name"><br><br>

            <label>Restaurant Address:</label><br>
            <input type="text" name="address"><br><br>
        </div>

        <button type="submit">Register</button>
    </form>

    <p>Already have an account? <a href="{% url 'login' %}">Login here</a></p>
</body>
</html>
